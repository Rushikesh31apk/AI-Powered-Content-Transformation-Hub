<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech - AI Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
            background:#121212; color:#f0f0f0; min-height:100vh;
        }

        /* ─── NAVBAR ─── */
        .top-navbar {
            position:fixed; top:0; left:0; width:100%; z-index:1000;
            background:rgba(18,18,18,0.95); backdrop-filter:blur(12px);
            border-bottom:2px solid #FFC107;
            padding:14px 32px; display:flex; align-items:center;
            justify-content:space-between; transition:padding .3s;
            box-shadow:0 4px 20px rgba(0,0,0,.4);
        }
        .top-navbar.scrolled { padding:10px 32px; }
        .nb-left { display:flex; align-items:center; gap:12px; }
        .nb-logo {
            width:42px; height:42px;
            background:linear-gradient(135deg,#FFC107,#FF9800);
            border-radius:50%; display:flex; align-items:center; justify-content:center;
            font-size:18px; color:#121212; font-weight:800;
            box-shadow:0 4px 12px rgba(255,193,7,.3);
        }
        .nb-brand { font-size:22px; font-weight:800; background:linear-gradient(to right,#FFC107,#FF9800); -webkit-background-clip:text; background-clip:text; color:transparent; }
        .nb-links { display:flex; gap:6px; }
        .nb-links a {
            color:#aaa; text-decoration:none; font-size:14px; font-weight:600;
            padding:8px 14px; border-radius:8px; transition:all .25s;
        }
        .nb-links a:hover, .nb-links a.active { color:#121212; background:#FFC107; }
        .nb-right { display:flex; align-items:center; gap:16px; }
        .nb-profile { display:flex; align-items:center; gap:10px; cursor:pointer; }
        .nb-avatar {
            width:36px; height:36px; border-radius:50%; background:linear-gradient(135deg,#FFC107,#FF9800);
            display:flex; align-items:center; justify-content:center; font-size:16px; color:#121212; font-weight:700;
            border:2px solid #333; overflow:hidden;
        }
        .nb-user-info { text-align:left; }
        .nb-user-name { font-size:13px; font-weight:700; color:#fff; }
        .nb-user-role { font-size:11px; color:#FFC107; }

        /* ─── PAGE LAYOUT ─── */
        .page-wrap { padding-top:84px; min-height:100vh; display:flex; flex-direction:column; }

        /* ─── HERO HEADER ─── */
        .page-hero {
            background:linear-gradient(135deg, #1a1a1a 0%, #222 100%);
            border-bottom:1px solid #2a2a2a;
            padding:36px 32px 32px; text-align:center; position:relative; overflow:hidden;
        }
        .page-hero::before {
            content:''; position:absolute; top:-60px; left:-60px;
            width:200px; height:200px; border-radius:50%;
            background:radial-gradient(circle, rgba(255,193,7,.08) 0%, transparent 70%);
        }
        .hero-icon-wrap {
            width:68px; height:68px; border-radius:18px; margin:0 auto 18px;
            background:linear-gradient(135deg,rgba(255,193,7,.15),rgba(255,152,0,.15));
            border:1px solid rgba(255,193,7,.3);
            display:flex; align-items:center; justify-content:center;
            font-size:28px; color:#FFC107; position:relative; z-index:1;
        }
        .page-hero h1 { font-size:1.9rem; font-weight:800; color:#fff; position:relative; z-index:1; margin-bottom:6px; }
        .page-hero h1 span { background:linear-gradient(135deg,#FFC107,#FF9800); -webkit-background-clip:text; background-clip:text; color:transparent; }
        .page-hero p { color:#888; font-size:.92rem; position:relative; z-index:1; max-width:520px; margin:0 auto; }

        /* ─── MAIN CONTENT ─── */
        .main-content { flex:1; padding:32px; max-width:1100px; margin:0 auto; width:100%; }

        /* ─── CARD BOXES ─── */
        .box {
            background:#1e1e1e; border:1px solid #2e2e2e; border-radius:16px;
            overflow:hidden; transition:border-color .3s; margin-bottom:20px;
        }
        .box:hover { border-color:rgba(255,193,7,.3); }
        .box-header {
            padding:16px 22px; border-bottom:1px solid #2a2a2a;
            display:flex; align-items:center; justify-content:space-between;
            background:#222;
        }
        .box-header-left { display:flex; align-items:center; gap:10px; }
        .box-header-left i { color:#FFC107; font-size:16px; }
        .box-header-left h5 { margin:0; font-size:.92rem; font-weight:700; color:#eee; }
        .box-badge {
            font-size:.7rem; font-weight:700; padding:3px 10px; border-radius:50px;
            background:rgba(255,193,7,.12); color:#FFC107; border:1px solid rgba(255,193,7,.25);
        }
        .box-body { padding:20px 22px; }

        /* ─── TEXTAREA ─── */
        .styled-textarea {
            width:100%; background:#161616; border:1px solid #333; color:#ddd;
            border-radius:10px; padding:14px 16px; font-size:.9rem; line-height:1.7;
            resize:vertical; min-height:160px; font-family:inherit;
            transition:all .25s; outline:none;
        }
        .styled-textarea:focus { border-color:#FFC107; box-shadow:0 0 0 3px rgba(255,193,7,.1); }
        .styled-textarea::placeholder { color:#555; }

        /* ─── SELECT DROPDOWN ─── */
        .styled-select {
            width:100%; background:#161616; border:1px solid #333; color:#ddd;
            border-radius:10px; padding:12px 16px; font-size:.9rem;
            outline:none; cursor:pointer; transition:all .25s;
        }
        .styled-select:focus { border-color:#FFC107; box-shadow:0 0 0 3px rgba(255,193,7,.1); }
        .styled-select option { background:#161616; color:#ddd; }
        .styled-select option:disabled { color:#555; }

        /* ─── VOICE CARDS ─── */
        .voice-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:12px; }
        .voice-card {
            background:#161616; border:1px solid #2a2a2a; border-radius:10px;
            padding:14px; cursor:pointer; transition:all .25s; position:relative;
        }
        .voice-card:hover { border-color:#FFC107; background:#1a1a1a; }
        .voice-card.selected { border-color:#FFC107; background:rgba(255,193,7,.08); }
        .voice-card.selected::after {
            content:'✓'; position:absolute; top:8px; right:10px;
            color:#FFC107; font-weight:900; font-size:14px;
        }
        .voice-card.locked { opacity:.5; cursor:not-allowed; }
        .voice-name { font-size:.88rem; font-weight:700; color:#eee; margin-bottom:4px; }
        .voice-lang { font-size:.75rem; color:#888; }
        .voice-badge {
            display:inline-block; font-size:.65rem; font-weight:700;
            padding:2px 8px; border-radius:4px; margin-top:6px;
            background:rgba(255,193,7,.12); color:#FFC107; border:1px solid rgba(255,193,7,.25);
        }
        .voice-badge.premium { background:rgba(255,87,34,.12); color:#FF5722; border-color:rgba(255,87,34,.25); }
        .lock-icon { position:absolute; top:10px; right:10px; color:#555; font-size:12px; }

        /* ─── BUTTONS ─── */
        .btn-generate {
            background:linear-gradient(135deg,#FFC107,#FF9800); color:#121212;
            border:none; padding:11px 28px; border-radius:10px; font-weight:700;
            font-size:.9rem; cursor:pointer; transition:all .25s; display:flex;
            align-items:center; gap:8px;
        }
        .btn-generate:hover { transform:translateY(-2px); box-shadow:0 8px 22px rgba(255,193,7,.35); }
        .btn-generate:active { transform:translateY(0); }
        .btn-generate i { font-size:14px; }
        .btn-clear {
            background:#2a2a2a; color:#999; border:1px solid #3a3a3a;
            padding:9px 18px; border-radius:10px; font-size:.82rem; font-weight:600;
            cursor:pointer; transition:all .25s;
        }
        .btn-clear:hover { border-color:#FFC107; color:#FFC107; }

        /* ─── AUDIO PLAYER ─── */
        .audio-player-wrap {
            background:#161616; border:1px solid #2a2a2a; border-radius:12px;
            padding:20px; display:flex; flex-direction:column; gap:16px;
        }
        .player-top { display:flex; align-items:center; gap:14px; }
        .play-btn {
            width:52px; height:52px; min-width:52px; border-radius:50%;
            background:linear-gradient(135deg,#FFC107,#FF9800);
            border:none; cursor:pointer; display:flex; align-items:center; justify-content:center;
            color:#121212; font-size:20px; transition:all .25s;
        }
        .play-btn:hover { transform:scale(1.08); box-shadow:0 6px 20px rgba(255,193,7,.4); }
        .wave-info { flex:1; }
        .wave-title { font-size:.88rem; font-weight:700; color:#eee; margin-bottom:3px; }
        .wave-meta { font-size:.75rem; color:#666; }
        audio { width:100%; height:36px; border-radius:6px; }
        audio::-webkit-media-controls-panel { background:#1a1a1a; }

        /* ─── CONTROLS ROW ─── */
        .controls-row { display:flex; align-items:center; justify-content:space-between; margin-top:16px; flex-wrap:wrap; gap:12px; }
        .char-count { font-size:.78rem; color:#666; }
        .char-count span { color:#FFC107; font-weight:700; }

        /* ─── TIPS ─── */
        .tips-strip {
            display:flex; gap:12px; margin-top:24px; flex-wrap:wrap;
        }
        .tip-pill {
            background:#1a1a1a; border:1px solid #2e2e2e; border-radius:50px;
            padding:7px 14px; font-size:.76rem; color:#777; display:flex; align-items:center; gap:7px;
        }
        .tip-pill i { color:#FFC107; font-size:11px; }

        /* ─── TOAST ─── */
        .toast-wrap { position:fixed; bottom:28px; right:28px; z-index:2000; }
        .toast-msg {
            background:#222; border:1px solid #FFC107; color:#fff; padding:12px 22px;
            border-radius:10px; font-size:.85rem; font-weight:600; display:flex; align-items:center; gap:10px;
            box-shadow:0 8px 24px rgba(0,0,0,.4); transform:translateY(80px); opacity:0;
            transition:all .35s ease; max-width:320px;
        }
        .toast-msg.show { transform:translateY(0); opacity:1; }
        .toast-msg i { color:#FFC107; font-size:16px; }

        /* ─── FOOTER ─── */
        .dash-footer {
            background:#0a0a0a; border-top:2px solid #FFC107;
            padding:24px 32px; text-align:center; margin-top:auto;
        }
        .dash-footer p { color:#777; font-size:.78rem; margin:2px 0; }
        .dash-footer .f-highlight { color:#FFC107; font-weight:600; }

        /* ─── RESPONSIVE ─── */
        @media(max-width:768px){
            .main-content { padding:24px 18px; }
            .top-navbar { padding:12px 16px; }
            .nb-links { gap:2px; }
            .nb-links a { padding:6px 10px; font-size:12px; }
            .voice-grid { grid-template-columns:1fr; }
        }
        @media(max-width:480px){
            .nb-links { display:none; }
            .page-hero { padding:28px 18px 24px; }
            .page-hero h1 { font-size:1.5rem; }
        }
    </style>
</head>
<body>

<!-- ═══════════ NAVBAR ═══════════ -->
<nav class="top-navbar" id="topNav">
    <div class="nb-left">
        <a href="{{ url_for('dashboard') }}" style="text-decoration:none;display:flex;align-items:center;gap:12px;">
            <div class="nb-logo"><i class="fas fa-robot"></i></div>
            <span class="nb-brand">AI Hub</span>
        </a>
    </div>
    <div class="nb-links">
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <a href="{{ url_for('summarize') }}">Summarize</a>
        <a href="{{ url_for('tts') }}" class="active">Text to Speech</a>
        <a href="{{ url_for('stt') }}">Speech to Text</a>
        <a href="{{ url_for('ocr') }}">OCR</a>
        <a href="{{ url_for('profile') }}">Profile</a>
    </div>
    <div class="nb-right">
        <div class="nb-profile">
            <div class="nb-avatar">
                {% if session.profile_image %}
                    <img src="{{ url_for('static', filename='uploads/' + session.profile_image) }}" style="width:100%;height:100%;object-fit:cover;" alt="">
                {% else %}
                    {{ session.user_name[0]|upper }}
                {% endif %}
            </div>
            <div class="nb-user-info">
                <div class="nb-user-name">{{ session.user_name }}</div>
                <div class="nb-user-role">{{ session.user_role }}</div>
            </div>
        </div>
    </div>
</nav>

<div class="page-wrap">

<!-- ═══════════ PAGE HERO ═══════════ -->
<div class="page-hero">
    <div class="hero-icon-wrap"><i class="fas fa-volume-high"></i></div>
    <h1>Text to <span>Speech</span></h1>
    <p>Convert your text into natural-sounding audio with AI-powered voice synthesis</p>
</div>

<!-- ═══════════ MAIN CONTENT ═══════════ -->
<div class="main-content">

    <form method="POST" action="{{ url_for('tts') }}" id="ttsForm">
        <!-- INPUT BOX -->
        <div class="box">
            <div class="box-header">
                <div class="box-header-left">
                    <i class="fas fa-keyboard"></i>
                    <h5>Enter Your Text</h5>
                </div>
                <span class="box-badge">INPUT</span>
            </div>
            <div class="box-body">
                <textarea class="styled-textarea" name="text" id="inputText" placeholder="Type or paste the text you want to convert to speech...

Example: Welcome to AI Hub! This is a demonstration of our text-to-speech technology." required>{{ input_text or '' }}</textarea>
                <div class="controls-row">
                    <span class="char-count">Characters: <span id="charCount">{{ (input_text or '')|length }}</span> / 5000</span>
                    <div style="display:flex;gap:8px;">
                        <button type="button" class="btn-clear" onclick="clearInput()">
                            <i class="fas fa-trash-alt"></i> Clear
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- VOICE SELECTION -->
        <div class="box">
            <div class="box-header">
                <div class="box-header-left">
                    <i class="fas fa-microphone"></i>
                    <h5>Select Voice</h5>
                </div>
                <span class="box-badge">{{ session.user_role }}</span>
            </div>
            <div class="box-body">
                <div class="voice-grid">
                    <!-- Free Voice -->
                    <label class="voice-card selected">
                        <input type="radio" name="voice" value="en" checked style="display:none;">
                        <div class="voice-name">English (US)</div>
                        <div class="voice-lang">Standard • Female</div>
                        <span class="voice-badge">FREE</span>
                    </label>

                    {% if session.user_role == 'Paid User' %}
                    <!-- Premium Voices (Unlocked) -->
                    <label class="voice-card">
                        <input type="radio" name="voice" value="en-uk" style="display:none;">
                        <div class="voice-name">English (UK)</div>
                        <div class="voice-lang">Premium • Male</div>
                        <span class="voice-badge premium">PREMIUM</span>
                    </label>
                    <label class="voice-card">
                        <input type="radio" name="voice" value="en-au" style="display:none;">
                        <div class="voice-name">English (AU)</div>
                        <div class="voice-lang">Premium • Female</div>
                        <span class="voice-badge premium">PREMIUM</span>
                    </label>
                    <label class="voice-card">
                        <input type="radio" name="voice" value="en-in" style="display:none;">
                        <div class="voice-name">English (IN)</div>
                        <div class="voice-lang">Premium • Female</div>
                        <span class="voice-badge premium">PREMIUM</span>
                    </label>
                    {% else %}
                    <!-- Premium Voices (Locked) -->
                    <div class="voice-card locked">
                        <i class="fas fa-lock lock-icon"></i>
                        <div class="voice-name">English (UK)</div>
                        <div class="voice-lang">Premium • Male</div>
                        <span class="voice-badge premium">PREMIUM</span>
                    </div>
                    <div class="voice-card locked">
                        <i class="fas fa-lock lock-icon"></i>
                        <div class="voice-name">English (AU)</div>
                        <div class="voice-lang">Premium • Female</div>
                        <span class="voice-badge premium">PREMIUM</span>
                    </div>
                    <div class="voice-card locked">
                        <i class="fas fa-lock lock-icon"></i>
                        <div class="voice-name">English (IN)</div>
                        <div class="voice-lang">Premium • Female</div>
                        <span class="voice-badge premium">PREMIUM</span>
                    </div>
                    {% endif %}
                </div>
                <button type="submit" class="btn-generate" style="margin-top:20px;">
                    <i class="fas fa-wand-magic-sparkles"></i> Generate Speech
                </button>
            </div>
        </div>
    </form>

    <!-- AUDIO OUTPUT -->
    {% if audio_file %}
    <div class="box">
        <div class="box-header">
            <div class="box-header-left">
                <i class="fas fa-check-circle" style="color:#4caf50;"></i>
                <h5>Generated Audio</h5>
            </div>
            <span class="box-badge" style="background:rgba(76,175,80,.12);color:#4caf50;border-color:rgba(76,175,80,.25);">READY</span>
        </div>
        <div class="box-body">
            <div class="audio-player-wrap">
                <div class="player-top">
                    <button class="play-btn" onclick="document.getElementById('audioPlayer').play()">
                        <i class="fas fa-play"></i>
                    </button>
                    <div class="wave-info">
                        <div class="wave-title">Your Generated Speech</div>
                        <div class="wave-meta">{{ input_text|length }} characters • {{ voice_name }}</div>
                    </div>
                </div>
                <audio id="audioPlayer" controls class="w-100">
                    <source src="{{ url_for('static', filename='audio/' + audio_file) }}" type="audio/mp3">
                    Your browser does not support the audio element.
                </audio>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- TIPS -->
    <div class="tips-strip">
        <div class="tip-pill"><i class="fas fa-check"></i> Max 5000 characters</div>
        <div class="tip-pill"><i class="fas fa-check"></i> Natural pronunciation</div>
        <div class="tip-pill"><i class="fas fa-check"></i> Instant generation</div>
        <div class="tip-pill"><i class="fas fa-check"></i> Download audio</div>
    </div>
</div>

</div><!-- end page-wrap -->

<!-- ═══════════ FOOTER ═══════════ -->
<footer class="dash-footer">
    <p><span class="f-highlight">© 2025 AI-Powered Content Transformation Hub</span></p>
    <p>Savitribai Phule Pune University</p>
</footer>

<!-- ═══════════ TOAST ═══════════ -->
<div class="toast-wrap">
    <div class="toast-msg" id="toast"><i class="fas fa-check-circle"></i> <span id="toastText">Audio generated!</span></div>
</div>

<script>
// ─── Live character count
const inputEl = document.getElementById('inputText');
const charCountEl = document.getElementById('charCount');
if(inputEl && charCountEl){
    inputEl.addEventListener('input', () => { charCountEl.textContent = inputEl.value.length; });
}

// ─── Clear input
function clearInput(){
    if(inputEl) inputEl.value = '';
    if(charCountEl) charCountEl.textContent = '0';
}

// ─── Voice card selection
document.querySelectorAll('.voice-card:not(.locked)').forEach(card => {
    card.addEventListener('click', () => {
        document.querySelectorAll('.voice-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');
        card.querySelector('input[type="radio"]').checked = true;
    });
});

// ─── Toast notification
function showToast(msg){
    const t = document.getElementById('toast');
    document.getElementById('toastText').textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2200);
}

// ─── Show toast if audio was generated
// {% if audio_file %}
//     setTimeout(() => showToast('Audio generated successfully!'), 300);
//{% endif %}

// ─── Navbar scroll shrink
const topNav = document.getElementById('topNav');
window.addEventListener('scroll', () => { topNav.classList.toggle('scrolled', window.scrollY > 40); });
</script>
</body>
</html>